<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>青蛙過街</title>
<style>canvas { background: url("http://i.imgur.com/ExBdGfu.jpg"); }</style><br>
</head>
<body>
    <form id="Time" runat="server">
        <div id='div'>
        </div>
    </form>
    
    <canvas id = "myCanvas" width = "720" height = "480"></canvas>
    <img id = "grass" widht = "100" height = "100" src = "http://ppt.cc/smwpA" style = "display:none" >
    <img id = "frog" widht = "100" height = "100" src = "http://i.imgur.com/eiDkUaJ.png" style = "display:none" >
    <img id = "wood" widht = "100" height = "100" src = "http://i.imgur.com/jEXx4Rk.png" style = "display:none" >
    <img id = "box" widht = "100" height = "100" src = "http://i.imgur.com/HcyxSeH.png"  style = "display:none" >  
    <img id = "rock" widht = "100" height = "100" src = "http://i.imgur.com/3uBqRGt.png" style = "display:none" >     
    <img id = "fish" widht = "100" height = "100" src = "http://i.imgur.com/MlnLnXr.png" style = "display:none" >
    <img id = "end" widht = "100" height = "100" src = "http://i.imgur.com/Z4NI2SP.png" >
    
    <script>
    //時間倒數---------------------------------------------------------//
//    var t = 15;
        
    
//    function showTime(){
//        t -= 1;
//        document.getElementById('div').innerHTML= t;
            
//        if(t==0){
//            alert("Time up!!!");
//            document.location.reload();
//        }
    //每秒執行一次
//        setTimeout("showTime()",1000);
//    }
//    showTime();
    //----------------------------------------------------------------//
    var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");
    document.addEventListener("keydown", keyDownHandler, false);
    document.addEventListener("keyup", keyUpHandler, false);
    var imgG = document.getElementById("grass");
    var imgF = document.getElementById("frog");
    var imgW = document.getElementById("wood");
    var imgB = document.getElementById("box");
    var imgR = document.getElementById("rock");
    var imgFi = document.getElementById("fish");    
    var imgE = document.getElementById("end");
    //--箱子A
    var rectAwidth = 60;
    var rectAheight = 60;
    var rectAx = 300;
    var rectAy = canvas.height/2;
    var offsetAx = 0;
    var offsetAy = 4;
    //--木頭W
    var rectWwidth = 50;
    var rectWheight = 80;
    var rectWx = 100;
    var rectWy = 300;
    var offsetWx = 0;
    var offsetWy = 3;
    //--手動蛙蛙F----------------------------------------------//
    var rectFwidth = 60;
    var rectFheight = 60;
    var rectFx = 0;
    var rectFy = 100;
    var rightPressed = false;       //右鍵
    var leftPressed = false;        //左鍵
    var forwardPressed = false;     //上鍵
    var backwardPressed = false;    //下鍵
    //--草叢G1------------------------------------------------//
    var rectG1width = 720;
    var rectG1height = 100;
    var rectG1x = 0;
    var rectG1y = 0;
    //--岩石R-------------------------------------------------//
    var rectRwidth = 150;
    var rectRheight = 150;
    var rectRx = 150;
    var rectRy = 100;
    //--魚Fi--------------------------------------------------//
    var rectFiwidth = 100;
    var rectFiheight = 60;
    var rectFix = 720;
    var rectFiy = 250;
    var offsetFix = 7;
    var offsetFiy = 0;
    //--結束E
    var rectEwidth = 60;
    var rectEheight = 60;
    var rectEx = 0;
    var rectEy = 0;
    //--箱子A-------------------------------------------------//
    function drawBox() {
        ctx.drawImage(imgB,0,0,93,74,rectAx,rectAy,rectAwidth,rectAheight);
    }
    //--木頭W-------------------------------------------------//
    function wood(){
        ctx.drawImage(imgW,0,0,65,236,rectWx,rectWy,rectWwidth,rectWheight);
    }
    //--手動蛙蛙F---------------------------------------------//
    function frog(){
        ctx.drawImage(imgF,0,0,1230,1018,rectFx,rectFy,rectFwidth,rectFheight);
    }
    //--草叢G-------------------------------------------------//
    function grass(){
        ctx.drawImage(imgG,0,0,2000,800,rectG1x,rectG1y,rectG1width,rectG1height);
        ctx.drawImage(imgG,0,0,2000,800,0,380,rectG1width,rectG1height);
    }
    //--岩石R-------------------------------------------------//
    function rock(){
        ctx.drawImage(imgR,0,0,204,456,rectRx,rectRy,rectRwidth,rectRheight);
    }
    //--魚Fi-------------------------------------------------//
    function fish(){
        ctx.drawImage(imgFi,0,0,301,216,rectFix,rectFiy,rectFiwidth,rectFiheight);
    }    
    //--結束E--------------------------------------------------//
    function end(){
        ctx.drawImage(imgE,0,0,591,478,rectEx,rectEy,rectEwidth,rectEheight);
    }     
    
    
    //--按鍵指令
    function keyDownHandler(e) {
    //--右鍵碼
        if(e.keyCode == 39) {
            rightPressed = true;
        }
    //--左鍵碼
        else if(e.keyCode == 37) {
            leftPressed = true;
        }
    //--上鍵碼
        if(e.keyCode == 38) {      
            forwardPressed = true;
        }
    //--下鍵碼
        else if(e.keyCode == 40) {
            backwardPressed = true;
        }
    }
    //--放掉鍵指令
    function keyUpHandler(e) {
        if(e.keyCode == 39) {
            rightPressed = false;
        }
        else if(e.keyCode == 37) {
            leftPressed = false;
        }
        if(e.keyCode == 38) {
            forwardPressed = false;
        }
        else if(e.keyCode == 40) {
            backwardPressed = false;
        } 
    }
    //--移動範圍
    function draw() {
    //--魚fi----------------------------------------------------------//    
        if(rectFix + offsetFix > 720 ) {
            offsetFix = -offsetFix;
        }
        rectFix += offsetFix;
    	        
                if(rectFix + offsetFix < 0 ) {
            rectFix = 720;
        }
    //--箱子A
        if(rectAy + offsetAy > 350 || rectAy + offsetAy < 100) {
            offsetAy = -offsetAy;
        }
        rectAy += offsetAy;
    //--箱子減速 ----------------------------------//
        // dx *= 0.99;
        // dy *= 0.99;
        // dy += 0.5;
    //--木頭W移動範圍------------------------------//
        if(rectWy + offsetWy  >= 320  || rectWy + offsetWy <= 100) {
            offsetWy = -offsetWy;
        }
        rectWy += offsetWy;
        rectWy -= Math.floor(Math.random()*3);
    //--左右按鍵輸入指令和範圍
        if(rightPressed && rectFx < canvas.width-rectFheight) {
            rectFx += 2;
        }
        else if(leftPressed && rectFx > 0) {
            rectFx -= 2;
        }       
    //--上下按鍵輸入指令和移動範圍
        if(backwardPressed && rectFy < 320) {
            rectFy += 2;
        }
        else if(forwardPressed && rectFy > 100) {
            rectFy -= 2;
        }
    //--岩石R碰撞    
        if(rectFx + rectFwidth >= rectRx && rectFx <= rectRx + rectRwidth){
        	if(rectFy + rectFheight >= rectRy && rectFy <= rectRy + rectRheight){
            rectFx -= 2;
            rectFy += 2;
        	}
        }
    //--木頭W碰撞
        if(rectFx + rectFwidth >= rectWx && rectFx <= rectWx + rectWwidth){
        	if(rectFy + rectFheight >= rectWy && rectFy <= rectWy + rectWheight){
            document.location.reload();
        	}
        }
    //--箱子A碰撞 
        if(rectFx + rectFwidth >= rectAx && rectFx <= rectAx + rectAwidth){
        	if(rectFy + rectFheight >= rectAy && rectFy <= rectAy + rectAheight){
             document.location.reload();
            }
        }
    //--魚Fi碰撞 
        if(rectFx + rectFwidth >= rectFix && rectFx <= rectFix + rectFiwidth){
        	if(rectFy + rectFheight >= rectFiy && rectFy <= rectFiy + rectFiheight){
             document.location.reload();
            }
        }   
    //--繪出圖形-----------------------------------------------------------
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawBox();
        grass();
        frog();
        wood();
    	rock();
   		fish();
		end();
   }
    setInterval(draw, 10);
</script>
</body>
</html>